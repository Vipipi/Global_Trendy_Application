(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{146:function(e,t,a){e.exports=a(288)},151:function(e,t,a){},284:function(e,t,a){},285:function(e,t,a){},286:function(e,t,a){},288:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(49),s=a.n(o),l=a(19),i=a(14),c=a(27),u=a(25),m=a(26),h=(a(151),function(){function e(){Object(l.a)(this,e)}return Object(i.a)(e,null,[{key:"authenticateUser",value:function(e,t){localStorage.setItem("token",e),localStorage.setItem("email",t)}},{key:"isUserAuthenticated",value:function(){return null!==localStorage.getItem("token")}},{key:"deauthenticateUser",value:function(){localStorage.removeItem("token"),localStorage.removeItem("email")}},{key:"getToken",value:function(){return localStorage.getItem("token")}},{key:"getEmail",value:function(){return localStorage.getItem("email")}}]),e}()),p=a(317),d=a(319),f=a(320),w=a(322),g=a(321),E=a(318),v=a(323),b=a(336),y=a(324),k=a(325),j=a(326),C=a(327),O=a(328),S=a(329),N=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"redirectToUrl",value:function(e,t){t.preventDefault(),window.open(e,"_blank")}},{key:"render",value:function(){var e=this;return r.a.createElement(p.a,{className:"card"},r.a.createElement(E.a,null,r.a.createElement(d.a,{component:"img",height:"320",image:this.props.news.urlToImage}),r.a.createElement(f.a,null,r.a.createElement(g.a,{gutterBottom:!0,variant:"h4",component:"h2"},this.props.news.title),null!=this.props.news.source&&r.a.createElement(b.a,{label:this.props.news.source,color:"primary"}),"\xa0 \xa0",null!=this.props.news.reason&&r.a.createElement(b.a,{label:this.props.news.reason,color:"secondary"}),"\xa0 \xa0",null!=this.props.news.time&&r.a.createElement(b.a,{label:this.props.news.time,variant:"outlined",color:"primary"}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(g.a,{component:"p"},this.props.news.description))),r.a.createElement(w.a,null,r.a.createElement(v.a,{size:"small",color:"primary",onClick:function(t){return e.redirectToUrl(e.props.news.url,t)}},"Learn More"),r.a.createElement(y.a,{url:this.props.news.url,quote:this.props.news.title},r.a.createElement(k.a,{size:24,round:!0})),r.a.createElement(j.a,{url:this.props.news.url,quote:this.props.news.title},r.a.createElement(C.a,{size:24})),r.a.createElement(O.a,{url:this.props.news.url,quote:this.props.news.title},r.a.createElement(S.a,{size:24}))))}}]),t}(r.a.Component),T=a(140),z=a(7),U=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"onClick",value:function(e){this.props.handleNodeClick(e);var t=1+60/Math.hypot(e.x,e.y,e.z);this.fg.cameraPosition({x:e.x*t,y:e.y*t,z:e.z*t},e,3e3)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(T.a,{ref:function(t){e.fg=t},width:.65*window.innerWidth,backgroundColor:"white",linkColor:function(e){return"#0a6aee"},graphData:this.props.graphData,linkWidth:function(e){return.5},onNodeClick:function(t){return e.onClick(t)},nodeThreeObject:function(e){var t=e.news,a=(new z.TextureLoader).load(t.urlToImage),n=new z.SpriteMaterial({map:a}),r=new z.Sprite(n);return r.scale.set(21,14,1),r}}))}}]),t}(r.a.Component),_=a(330),q=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).state={data:{},focused_news:{},loaded:!1},e}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.loadNews()}},{key:"loadNews",value:function(){var e=this,t="http://"+window.location.hostname+"/news",a=new Request(t,{method:"GET",headers:{Authorization:"bearer "+h.getToken()}});fetch(a).then(function(e){return e.json()}).then(function(t){e.setState({data:t,focused_news:t.focused_news,loaded:!0})})}},{key:"generateGraphData",value:function(e){return{nodes:e.news.map(function(e){return{id:e.digest,news:e}}),links:e.graph.links.map(function(e){return{source:e.from,target:e.to}})}}},{key:"handleNodeClick",value:function(e){this.setState({focused_news:e.news})}},{key:"render",value:function(){var e=this;if(!1===this.state.loaded)return r.a.createElement("div",null);var t=this.generateGraphData(this.state.data);return r.a.createElement("div",null,r.a.createElement(_.a,{container:!0},r.a.createElement(_.a,{item:!0,md:8},r.a.createElement(U,{graphData:t,handleNodeClick:function(t){return e.handleNodeClick(t)}})),r.a.createElement(_.a,{item:!0,md:4},r.a.createElement(N,{news:this.state.focused_news}))))}}]),t}(r.a.Component),D=(a(284),a(331)),F=a(335),W=a(337),x=a(141),I=function(e){var t=e.onSubmit,a=e.onChange,n=e.error;return r.a.createElement("div",{className:"login-panel"},r.a.createElement(x.a,{className:"paper"},r.a.createElement(g.a,{component:"h1",variant:"h4"},"Sign in"),r.a.createElement("form",{onSubmit:t},n&&r.a.createElement("p",{className:"error-message"},n),r.a.createElement(D.a,{margin:"normal",required:!0,fullWidth:!0},r.a.createElement(W.a,{htmlFor:"email"},"Email Address"),r.a.createElement(F.a,{id:"email",name:"email",autoComplete:"email",autoFocus:!0,onChange:a})),r.a.createElement(D.a,{margin:"normal",required:!0,fullWidth:!0},r.a.createElement(W.a,{htmlFor:"password"},"Password"),r.a.createElement(F.a,{name:"password",type:"password",id:"password",autoComplete:"current-password",onChange:a})),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(v.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary"},"Sign in"))))},A=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={error:"",user:{email:"",password:""}},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"processForm",value:function(e){var t=this;e.preventDefault();var a=this.state.user.email,n=this.state.user.password;console.log("email: ",a),console.log("password: ",n);var r="http://"+window.location.hostname+"/auth/login",o=new Request(r,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({email:a,password:n})});fetch(o).then(function(e){200===e.status?(t.setState({error:""}),e.json().then(function(e){h.authenticateUser(e.token,a),window.location.replace("/")})):(console.log("login failed!."),e.json().then(function(e){var a=e.error?e.error:"";t.setState({error:a})}))})}},{key:"changeUser",value:function(e){e.preventDefault();var t=e.target.name,a=this.state.user;a[t]=e.target.value,this.setState({user:a})}},{key:"render",value:function(){var e=this;return r.a.createElement(I,{onSubmit:function(t){return e.processForm(t)},onChange:function(t){return e.changeUser(t)},error:this.state.error})}}]),t}(r.a.Component),M=(a(285),function(e){var t=e.onSubmit,a=e.onChange,n=e.error;return r.a.createElement("div",{className:"signup-panel"},r.a.createElement(x.a,{className:"paper"},r.a.createElement(g.a,{component:"h1",variant:"h4"},"Sign up"),r.a.createElement("form",{onSubmit:t},n&&r.a.createElement("p",{className:"error-message"},n),r.a.createElement(D.a,{margin:"normal",required:!0,fullWidth:!0},r.a.createElement(W.a,{htmlFor:"email"},"Email Address"),r.a.createElement(F.a,{id:"email",name:"email",autoComplete:"email",autoFocus:!0,onChange:a})),r.a.createElement(D.a,{margin:"normal",required:!0,fullWidth:!0},r.a.createElement(W.a,{htmlFor:"password"},"Password"),r.a.createElement(F.a,{name:"password",type:"password",id:"password",autoComplete:"current-password",onChange:a})),r.a.createElement(D.a,{margin:"normal",required:!0,fullWidth:!0},r.a.createElement(W.a,{htmlFor:"password"},"Confirm Password"),r.a.createElement(F.a,{name:"confirm_password",type:"password",id:"confirm_password",autoComplete:"current-password",onChange:a})),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(v.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary"},"Sign in"))))}),P=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={error:"",user:{email:"",password:"",confirm_password:""}},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"processForm",value:function(e){var t=this;e.preventDefault();var a=this.state.user.email,n=this.state.user.password,r=this.state.user.confirm_password;console.log("email: ",a),console.log("password: ",n),console.log("confirm_password: ",r);var o="http://"+window.location.hostname+"/auth/signup",s=new Request(o,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({email:a,password:n})});fetch(s).then(function(e){200===e.status?(t.setState({error:""}),window.location.replace("/")):(console.log("singup failed!."),e.json().then(function(e){var a=e.error?e.error:"";t.setState({error:a})}))})}},{key:"changeUser",value:function(e){e.preventDefault();var t=e.target.name,a=this.state.user;a[t]=e.target.value,this.setState({user:a});var n=this.state.error;console.log(this.state.user),n=this.state.user.password!==this.state.user.confirm_password?"Password and confirm password don't match":"",this.setState({error:n})}},{key:"render",value:function(){var e=this;return r.a.createElement(M,{onSubmit:function(t){return e.processForm(t)},onChange:function(t){return e.changeUser(t)},error:this.state.error})}}]),t}(r.a.Component),B=a(332),H=a(333),J=a(334),L=a(35),G=a(64),R=(a(286),Object(L.e)(function(e){e.history;return r.a.createElement("div",{className:"root"},r.a.createElement(B.a,{position:"static",className:"appBar"},r.a.createElement(H.a,{variant:"dense"},r.a.createElement(J.a,{className:"menuButton",color:"inherit","aria-label":"Menu"},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},r.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),r.a.createElement("path",{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"}))),r.a.createElement(g.a,{variant:"h6",color:"inherit",className:"grow"},"Trendy"),h.isUserAuthenticated()?r.a.createElement("div",null,h.getEmail(),r.a.createElement(v.a,{color:"inherit",href:"/logout",onClick:function(e){return function(e){e.push("/login")}(e)}},"Log out")):r.a.createElement("div",null,r.a.createElement(v.a,{color:"inherit",component:G.b,to:"/login"},"Log in"),r.a.createElement(v.a,{color:"inherit",component:G.b,to:"/signup"},"Sign up")))),r.a.createElement("br",null),r.a.createElement(L.a,{exact:!0,path:"/",render:function(){return h.isUserAuthenticated()?r.a.createElement(q,null):r.a.createElement(A,null)}}),r.a.createElement(L.a,{exact:!0,path:"/login",component:A}),r.a.createElement(L.a,{exact:!0,path:"/signup",component:P}))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(G.a,null,r.a.createElement(R,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[146,1,2]]]);
//# sourceMappingURL=main.357bbd63.chunk.js.map